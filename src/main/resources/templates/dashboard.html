<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard-Calendly</title>
    <style>
        #navbar{
    font-family:sans-serif;
    display: flex;
padding: 0% 10%;
justify-content: space-between;
padding-bottom: 10px;
border-bottom: 0.1px solid rgb(236, 228, 228);
position: sticky;
top: 0;
background-color:white;
}

#logout{
    /* border: 0.5px solid rgb(20, 20, 237); */
    padding: 5px 10px;
    margin-top: -7px;
    border-radius: 20px;
    background-color: red;
    color: white;
    border: 0px;
    font-weight: 550;
}

#logout-dash{
    padding: 7px 12px;
    margin-top: -7px;
    border-radius: 20px;
    background-color: red;
    color: white;
    border: 0px;
    font-weight: 550;
}

#options{
    display: flex;
    gap: 12%;
    margin-right: 5%;
    margin-top: 20px;
}

#options>a{
    text-decoration: none;

}

img{
    width:40px;
    height: 40px;
    margin-top: 8px;
}

#options> a:first-child{
    font-weight: bold;
    color: black;

}
.a{
    color: grey;

}


.a:hover{
    color: black

}

#secondnavbar{
    display: flex;
    font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
    display: flex;
padding: 0% 10%;
justify-content: space-between;
padding-bottom: 10px;
margin-top: 30px;

box-shadow: rgba(0, 0, 0, 0.24) 0px 2px 1px;

}

#eventtype{
    display: flex;


}
#secondnavbar p{
    margin-top: -1px;
}

#headline{
   font-size: 160%;
    margin-left: 15%;

}
button{
   height: 34px;
   width: 70px;
   border-radius: 20px;
   border: 1px solid rgb(20, 20, 237);
   background-color: white;
   color: rgb(20, 20, 237);
}



@media only screen and (max-width: 700px){
    body{
        padding: 0;

     }
    #navbar{
        padding-left: 3%;

      }
       #navbar a{
        font-size: 13px;
       }
       #navbar img{
        margin-top: -5px;
       }
       #options{
        margin-right:18%;
       }
}

p{
    font-family: sans-serif;
}
#create-btn{
    background-color: rgb(47, 94, 235);
    color: white;
    padding: 0px 10px;
}
#create-btn:active{
    box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;
}


#headings{
display: flex;
gap: 5%;
padding: 0% 10%;
box-shadow: rgba(0, 0, 0, 0.24) 0px 2px 1px;
height: 80px;
}

#secondnavbar-dash{
    display: flex;
    font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
    display: flex;
padding: 0% 10%;
justify-content: space-between;
padding-bottom: 10px;
margin-top: 30px;

}

#secondnavbar-dash p{
    font-size:180%;
    margin-top: -4px;

}
#create-btn{
    width: 100px;
    height: 43px;
   background-color:  rgb(47, 94, 235);
}


#B{
    display: flex;

    padding: 0% 10%;
    justify-content: space-between;
    margin-top: 20px;

}
#new-event-btn{
    margin-right: 10px;
width: 200px;

}

#new-event-btn:hover{
background-color: rgba(107, 107, 236, 0.142);
}

#url p{
margin-top: -5px;
margin-left: 10px;
}
#url p:last-child{
    margin-top: -10px;
}
#B img:last-child{
    width:20px;
    height: 20px;
}
#Name{
    color: grey;

}

.eventButton{
border:none;
color:black;
}
.card{
    margin-top: 20px;
    width: 83%;
    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
    padding:5%;
    border-radius: 8px;
    border-top: solid 8px rgba(98, 24, 225, 0.781);

}

.card div{
    display: flex; justify-content: space-between;
}

.card img{
    width: 20px;
    height: 20px;

}

.card div:last-child>p{
    margin-top: 8px;
}


#card{
    border-top: solid 8px red;
    transition: 1.5s;
    color:red;
    opacity: 0;
}


#main{
padding: 0% 10%;
display: grid;
grid-template-columns: repeat(3,1fr);
}
#eventname{
font-size: large;
}
#duration{
    color: grey;

}
#duration+p{
    color:rgb(47, 94, 235);
}
.card button{
    background-color:rgba(244, 245, 250, 0)
}
.card button:hover{
   background-color:  rgba(107, 107, 236, 0.142);;
}

.blue{
    color:rgb(47, 94, 235);
}


.card div:last-child{
    border-top: solid 0.2px rgb(188, 187, 187);
    padding-top: 10px;

}
.card:hover{
    box-shadow: rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px;
    margin-left: -1px;
    margin-bottom: -1px;
    transition: 0.5s;
    border-color: rgb(54, 0, 114);
 background-color: rgb(240, 240, 245);

}

#B>div:first-child{
    display: flex;
   }

@media only screen and (max-width: 700px) {
  body{
   padding: 0;
   padding-right: 3%;
   }
  #navbar{
    padding-left: 3%;

  }
  #navbar a{
    font-size: 13px;
  }
  #navbar img{
    margin-top: -5px;
  }

  #secondnavbar{
    display: grid;
  }


  #main{
    grid-template-columns: repeat(1,1fr);
   }
  .card{
    width: 80%px;
    margin: auto;
    margin-top: 20px;
  }

  #B {
    display: grid;
  }

  #B1{
    display: flex;
    margin-top: 20px;
  }

  #B>div:first-child{
    display: flex;
  }

  #new-event-btn{
   width: 300px;
   margin-left: 20%;
  }

  #url{
   margin: 0px 0px 0px 0px;
   margin-bottom: -10px;
  }

  #headings p{
    font-size: 12px;
  }
 }

          .main {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 10px;
            width: 85%;
            margin: auto;
        }

        .button{
            font-size:22px;
            margin: 5px;
        }

         .para{
        padding-bottom: 62px;
        display:block;
    border-bottom: solid 3px rgb(59, 59, 255) !important;
    }
    .hide{
    display:none;
    }

    #B{
        display:block;
    }

    .flat-button {
        border: none;
        background: none;
        padding: 0; /* Optional: If you want to remove padding */
        cursor: pointer; /* Optional: Add a pointer cursor for better UX */
        outline: none; /* Remove outline on focus */
    }

    .flat-button:hover {
        background: none;
        border: none; /* Remove border on hover */
        outline: none; /* Remove outline on focus */
    }

            #schedule-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px; /* Spacing between schedule blocks */
        }

        .schedule-block {
            background-color: #fff; /* White background */
            padding: 15px;
            border-radius: 8px; /* Rounded corners */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle box shadow */
            text-align: left;
            max-width: 300px; /* Maximum width for better readability */
            margin-bottom: 20px;
        }

  .confirmation-button {
    display: inline-block;
    padding: 10px 20px;
    border-radius: 20px;
    background-color: blue;
    color: white;
    text-decoration: none;
  }

    </style>
</head>
<body>
<div id="navbar">
    <img src="https://assets.calendly.com/packs/frontend/media/logo-square-cd364a3c33976d32792a.png" alt="">
    <div sec:authorize="isAuthenticated()">
        <h2 th:text="'Welcome : '+${user.name}" style="color: black;"></h2>
    </div>

    <div id="options">
        <a class="a" href="/dashboard">Home</a>
        <!--        <a class="a" href="#">Availibilty</a>-->
        <!--        <a class="a" href="help.html">Help</a>-->
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="a" id="logout-dash">Logout</button>
        </form>

    </div>
</div>

<div id="secondnavbar-dash">
    <p>My calendly <span></span></p>
    <form th:action="@{/new-event}">
        <button type="submit" id="create-btn">Create Event</button>
    </form>
</div>
<div id="headings">
    <p onclick="changefirstP()">Event Types</p>
    <p onclick="changeDiv()">Scheduled Events</p>
</div>

<section id="B">
    <div>

    </div>

    <div class="main">
        <div th:each="event: ${events}">
            <div class="card">
                <div>
                    <form th:action="@{/events/delete/{eventId}(eventId=${event.id})}" method="get">
                        <button type="submit" class="delete-btn">Delete</button>
                    </form>
                </div>
                <form th:action="@{/create-event}">
                    <input type="hidden" th:name="eventId" th:value="${event.id}">
                    <button class="flat-button">
                        <h1 th:text="${event.title}"/>
                    </button>
                </form>
                <p>Duration: <span th:text="${event.duration}"/></p>
                <p>Location: <span th:text="${event.location}"/></p>

                <div>
                    <p class="blue" th:attr="onclick='copyToClipboard(\'' + ${event.id} + '\')'">‚ùê Copy link</p>
                </div>
            </div>
        </div>

    </div>
    <div class="main-2 hide">
        <div id="schedule-container">
            <div id="schedule" th:each="schedule: ${scheduledMeets}" class="schedule-block">
                <div>
                    <form th:action="@{/deleteSchedule}" method="get">
                        <input type="hidden" name="id" th:value="${schedule.id}" />
                        <button type="submit" class="delete-btn">Delete</button>
                    </form>
                </div>
                <h1>Event Name: <span th:text="${schedule.event.title}"></span></h1>
                <h2>Invitee: <span th:text="${schedule.inviteeName}"></span></h2>
                <p th:text="${schedule.inviteeEmail}"/>
                <p th:text="${schedule.startTime + ' - ' + schedule.endTime}"></p>
                <p th:text="${schedule.event.location}"/>
                <p th:text="${schedule.description}"/>

                <a th:href="'mailto:' + ${schedule.inviteeEmail} + '?subject=Meeting%20Confirmation&body=Dear%20User,%0A%0AYour%20meeting%20has%20been%20confirmed.%0A%0A' + (${schedule.event.location == 'Zoom' ? 'Please find the below Zoom invite:   Zoom Invite Link: https://us05web.zoom.us/j/4497348515   Passcode: edZEj4' : schedule.event.location == 'Google meet' ? 'Please find the below Google meet invite:   Meet Invite Link: https://meet.google.com/wat-ptvv-tqg' : ''}) + '%0A%0ABest%20regards,%0AYour%20Application'"
                   target="_blank" class="confirmation-button">Send Confirmation Email</a>

            </div>
        </div>
    </div>

    <script>
    function copyToClipboard(eventId) {
    // Get the current date in the format 'yyyy-MM-dd'
    var currentDate = new Date().toISOString().split('T')[0];

    // Build the link with the specified format
    var link = 'http://localhost:8080/select-timeslot?selectedDate=' + currentDate + '&eventId=' + eventId;

    // Create a temporary input element
    var tempInput = document.createElement('input');
    tempInput.value = link;
    document.body.appendChild(tempInput);

    // Select the input text
    tempInput.select();
    document.execCommand('copy');

    // Remove the temporary input
    document.body.removeChild(tempInput);

    // Show an alert indicating that the link has been copied to the clipboard
    alert('Link copied to clipboard: ' + link);
}


    function changeDiv(){
      console.log('hello');
       document.querySelectorAll('#headings p')[1].classList.add('para');
   document.querySelectorAll('#headings p')[0].classList.remove('para');
    document.querySelectorAll('#headings p')[0].style.border='none';
     document.querySelector('.main-2').classList.remove('hide');
     document.querySelector('.main').classList.add('hide');
    }
        function changefirstP(){
      console.log('hello p');
       //console.log(document.querySelector('#headings').children[0]);
        document.querySelectorAll('#headings p')[0].classList.add('para');
       document.querySelectorAll('#headings p')[1].classList.remove('para');
       document.querySelector('.main-2').classList.add('hide');
       document.querySelector('.main').classList.remove('hide');
    }

    </script>

</section>

</body>

</html>

